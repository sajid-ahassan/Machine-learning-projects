<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Movie Recommendation System</title>

        <link rel="stylesheet"
            href="{{ url_for('static', filename='style.css') }}" />
        <link rel="stylesheet" href="/static/style.css" />

        <script src="https://cdn.tailwindcss.com"></script>
        <style>
            @keyframes slowzoom {
            0% { transform: scale(1); }
            100% { transform: scale(1.15); }
            }
        </style>
    </head>

    <body>
        <!-- NAVBAR -->
        <nav
            class="fixed top-0 left-0 w-full z-50 bg-black/40 backdrop-blur-md border-b border-white/10">
            <div
                class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between text-white">

                <!-- Logo -->
                <div
                    class="text-3xl font-extrabold tracking-wide text-emerald-300">
                    MovieRec
                </div>

                <!-- Desktop Menu -->
                <ul class="hidden md:flex text-lg space-x-10">
                    <li><a href="/"
                            class="hover:text-emerald-400 transition">Home</a></li>
                    <li><a href="/recommend"
                            class="hover:text-emerald-400 transition">Recommendations</a></li>
                   
                </ul>

                <!-- Mobile Button -->
                <button id="menu-btn" class="md:hidden focus:outline-none">
                    <svg class="w-9 h-9" fill="none" stroke="currentColor"
                        stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>

            </div>

            <!-- Mobile Menu -->
            <div id="mobile-menu"
                class="md:hidden max-h-0 opacity-0 overflow-hidden transition-all duration-300 px-6 pb-6 text-white space-y-4">
                <a href="/" class="block hover:text-emerald-400">Home</a>
                <a href="/recommend"
                    class="block hover:text-emerald-400">Recommendations</a>
                
            </div>
        </nav>

        <!-- HERO -->
        <section class="relative h-screen w-full overflow-hidden">

            <!-- Background (Cinematic Parallax) -->
            <div id="bg-slider"
                class="absolute inset-0 bg-cover bg-center transition-opacity duration-700 opacity-100"
                style="background-image: url('/static/im1.jpg');">
            </div>

            <!-- Gradient Overlay -->
            <div
                class="absolute inset-0 bg-gradient-to-b from-black/70 via-black/60 to-black/95"></div>

            <!-- Center Content -->
            <div
                class="relative z-10 h-full flex flex-col items-center justify-center text-center px-4">

                <!-- Glassmorphism card -->
                <div
                    class="bg-white/10 backdrop-blur-xl shadow-2xl p-10 rounded-3xl border border-white/20 max-w-3xl">
                    <h1
                        class="text-5xl md:text-6xl font-extrabold text-emerald-200 drop-shadow-lg mb-6">
                        Find Your Next Favorite Movie
                    </h1>

                    <p class="text-xl md:text-2xl text-gray-200 mb-8">
                        Personalized recommendations crafted just for you.
                    </p>

                    <a href="/recommend"
                        class="px-8 py-3 bg-emerald-500 hover:bg-emerald-400 rounded-full text-black font-semibold shadow-xl transition transform hover:scale-105">
                        Recommendations
                    </a>
                </div>

            </div>

        </section>

        <!-- Popular Movies Section -->
        <section class="py-10 bg-white">
            <div class="max-w-5xl mx-auto px-4 text-center">
                <h2 class="text-2xl md:text-3xl font-semibold text-gray-900">
                    Most Popular Movies
                </h2>
                <p class="mt-2 text-gray-600">
                    Here are some of the most popular movies based on user
                    ratings.
                </p>

                <div
                    class="mt-6 h-[2px] w-24 bg-gray-300 mx-auto rounded-full"></div>
            </div>
        </section>

        <!-- Populer recommendation -->

        {% if p_data %}

        <div
            class="flex flex-wrap justify-center gap-6 px-[12px] pt-[50px] pb-[100px]">

            {% for i in p_data %}
            <a href="/movie_details/{{ i[4] }}"
                class="block 
               w-36 sm:w-44 md:w-52 lg:w-60 xl:w-64 mx-6">

                <div
                    class="bg-gray-800 text-white rounded-xl overflow-hidden shadow-lg 
                   hover:scale-105 hover:shadow-2xl transition duration-300
                   flex flex-col h-[420px]">

                    <!-- Image Area (responsive) -->
                    <div
                        class="w-full h-52 sm:h-60 md:h-68 lg:h-72 overflow-hidden">
                        <img src="{{ i[3] }}" alt="Movie Poster"
                            class="w-full h-full object-cover" />
                    </div>

                    <!-- Content -->
                    <div class="p-4 flex flex-col justify-between flex-1">

                        <!-- Movie Title (Truncate long text) -->
                        <h2
                            class="text-base sm:text-lg md:text-xl font-semibold mb-2">
                            {{ i[0] }}
                        </h2>

                        <!-- Director (Truncate long text) -->
                        <p
                            class="text-gray-300 text-xs sm:text-sm mb-2 truncate">
                            <span class="font-semibold">Director:</span> {{ i[1]
                            }}
                        </p>

                        <!-- Rating (sticks to bottom) -->
                        <div class="flex items-center space-x-1 mt-auto">
                            <span
                                class="text-sm sm:text-base md:text-lg font-medium">
                                {{ i[2] }}
                            </span>
                        </div>

                    </div>

                </div>

            </a>
            {% endfor %}

        </div>

        {% endif %}

        <script>
        //<!-- Side bar -->
        const menuBtn = document.getElementById("menu-btn");
        const mobileMenu = document.getElementById("mobile-menu");

        menuBtn.addEventListener("click", () => {
            mobileMenu.classList.toggle("max-h-0"); // collapsed
            mobileMenu.classList.toggle("max-h-96"); // expanded
            mobileMenu.classList.toggle("opacity-0"); // faded out
            mobileMenu.classList.toggle("opacity-100"); // faded in
        });

        // Array of background images
        const images = [
            "/static/im2.jpg",
            "/static/im3.jpg",
            "/static/im4.jpg",
        ];

        const slider = document.getElementById("bg-slider");
        let currentIndex = 0;

        function changeBackground() {
            // Fade out
            slider.classList.add("opacity-0");

            setTimeout(() => {
                // Change image when faded
                currentIndex = (currentIndex + 1) % images.length;
                slider.style.backgroundImage = `url('${images[currentIndex]}')`;

                // Fade back in
                slider.classList.remove("opacity-0");
            }, 200); // matches duration-700
        }

        // Change every 5 seconds
        setInterval(changeBackground, 5000);
    </script>
    </body>

</html>
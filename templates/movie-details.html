<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Movie Recommendation System</title>

        <link rel="stylesheet"
            href="{{ url_for('static', filename='style.css') }}" />
        <link rel="stylesheet" href="/static/style.css" />

        <script src="https://cdn.tailwindcss.com"></script>
    </head>

    <body>
        <!-- Navbar -->
        <nav
            class="fixed top-0 left-0 w-full z-50 bg-black/40 backdrop-blur-md border-b border-white/10">
            <div
                class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between text-white">

                <!-- Logo -->
                <div
                    class="text-3xl font-extrabold tracking-wide text-emerald-300">
                    MovieRec
                </div>

                <!-- Desktop Menu -->
                <ul class="hidden md:flex text-lg space-x-10">
                    <li><a href="/"
                            class="hover:text-emerald-400 transition">Home</a></li>
                    <li><a href="/recommend"
                            class="hover:text-emerald-400 transition">Recommendations</a></li>
                    
                </ul>

                <!-- Mobile Button -->
                <button id="menu-btn" class="md:hidden focus:outline-none">
                    <svg class="w-9 h-9" fill="none" stroke="currentColor"
                        stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>

            </div>

            <!-- Mobile Menu -->
            <div id="mobile-menu"
                class="md:hidden max-h-0 opacity-0 overflow-hidden transition-all duration-300 px-6 pb-6 text-white space-y-4">
                <a href="/" class="block hover:text-emerald-400">Home</a>
                <a href="/recommend"
                    class="block hover:text-emerald-400">Recommendations</a>
                
            </div>
        </nav>
        <!-- nav end -->

        <!-- Page Wrapper -->
        <main class="py-10 px-4">
            <div
                class="max-w-6xl mx-auto bg-gradient-to-br from-slate-900 via-slate-900 to-slate-950
           border border-slate-800 rounded-3xl shadow-2xl overflow-hidden mt-[40px]">

                <!-- Top: Poster + Description -->
                <div
                    class="flex flex-col md:grid md:grid-cols-[260px,1fr] gap-8 p-6 md:p-10">
                    <!-- Poster (top-left) -->
                    <div class="flex justify-center md:justify-start">
                        <div
                            class="overflow-hidden rounded-2xl shadow-xl border border-slate-800 bg-slate-800/60
                 w-40 sm:w-52 md:w-full">
                            <img
                                src="{{ og_data[10] }}"
                                alt="Movie poster"
                                class="w-full h-full object-cover md:h-[380px]" />
                        </div>
                    </div>

                    <!-- Title + Description (top-right) -->
                    <div class="mt-4 md:mt-0 flex flex-col gap-4 text-white">
                        <div>
                            <h1
                                class="text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight">
                                {{ og_data[0] }}
                            </h1>
                            <p class="mt-1 text-xs sm:text-sm text-slate-400">
                                {{ og_data[9] }}
                            </p>
                        </div>

                        <!-- Quick chips -->
                        <div
                            class="flex flex-wrap gap-2 text-[11px] sm:text-xs">
                            <span
                                class="px-3 py-1 rounded-full bg-slate-800/80 border border-slate-700">
                                Released: {{ og_data[7] }}
                            </span>
                            <span
                                class="px-3 py-1 rounded-full bg-slate-800/80 border border-slate-700">
                                Runtime: {{ og_data[5] }} min
                            </span>
                            <span
                                class="px-3 py-1 rounded-full bg-yellow-500/20 border border-yellow-500/60 text-yellow-300">
                                ⭐ {{ og_data[6] }} / 10
                            </span>
                        </div>

                        <!-- Overview -->
                        <div>
                            <h2 class="text-lg font-semibold mb-1">Overview</h2>
                            <p
                                class="text-sm md:text-base text-slate-200 leading-relaxed">
                                {{ og_data[4] }}
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Bottom: Details section -->
                <section
                    class="border-t border-slate-800 bg-slate-900/90 px-6 md:px-10 py-6 md:py-8 text-white">
                    <h2 class="text-xl md:text-2xl font-semibold mb-4">Movie
                        Details</h2>

                    <div class="grid gap-6 md:grid-cols-2 text-sm md:text-base">
                        <!-- Left column -->
                        <div class="space-y-4">
                            <div>
                                <p
                                    class="text-slate-400 text-xs uppercase tracking-wide mb-1">Genres</p>
                                <p class="text-slate-100">
                                    {% for i in og_data[3] %}
                                    {{ i }}{% if not loop.last %}, {% endif %}
                                    {% endfor %}
                                </p>
                            </div>

                            <div>
                                <p
                                    class="text-slate-400 text-xs uppercase tracking-wide mb-1">Main
                                    Cast</p>
                                <p class="text-slate-100">
                                    {% for i in og_data[1] %}
                                    {{ i }}{% if not loop.last %}, {% endif %}
                                    {% endfor %}
                                </p>
                            </div>

                            <div>
                                <p
                                    class="text-slate-400 text-xs uppercase tracking-wide mb-1">Crew</p>
                                <p class="text-slate-100">
                                    Director: {{ og_data[2] }}<br />
                                </p>
                            </div>
                        </div>

                        <!-- Right column -->
                        <div class="space-y-4">
                            <div>
                                <p
                                    class="text-slate-400 text-xs uppercase tracking-wide mb-1">Release
                                    Date</p>
                                <p class="text-slate-100">{{ og_data[7] }}</p>
                            </div>

                            <div>
                                <p
                                    class="text-slate-400 text-xs uppercase tracking-wide mb-1">Rating</p>
                                <p class="text-slate-100">⭐ {{ og_data[6] }} /
                                    10 (IMDb)</p>
                            </div>

                            <div>
                                <p
                                    class="text-slate-400 text-xs uppercase tracking-wide mb-1">Language</p>
                                <p class="text-slate-100">{{ og_data[8] }}</p>
                            </div>
                        </div>
                    </div>
                </section>

            </div>
        </main>

        <!-- Reviews Section -->
        <section class="px-4">
            {% if review_list %}

            <div class="max-w-6xl mx-auto">
                <h2 class="text-2xl font-semibold mb-4 text-white">User
                    Reviews</h2>
                <p class="text-sm text-black mb-6">
                    See what other people are saying about this movie.
                </p>

                <!-- Grid wrapper -->
                <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3"
                    id="reviews-grid">
                    {% for i in review_list %}
                    <!-- Review Card -->
                    <article
                        class="bg-slate-900/90 border border-slate-800 rounded-2xl p-4 flex flex-col min-h-[230px]
               {% if loop.index0 >= 6 %}hidden{% endif %}"
                        data-review-card>
                        <div class="flex items-center justify-between mb-2">
                            <div>
                                <p class="text-sm font-semibold text-white">{{
                                    i[0] }}</p>
                                <p class="text-xs text-slate-400">2 days ago</p>
                            </div>
                            <p class="text-sm text-yellow-300">⭐ {{ i[1] }} /
                                10</p>
                        </div>

                        <p
                            class="text-sm text-slate-100 leading-relaxed mt-2 max-h-24 overflow-hidden"
                            data-review-text>
                            {{ i[2] }}
                        </p>

                        <button
                            type="button"
                            class="mt-3 text-xs font-semibold text-emerald-400 hover:text-emerald-300 hover:underline self-start"
                            data-review-toggle>
                            Read full review
                        </button>
                    </article>
                    {% endfor %}
                </div>

                <!-- Load more button (only if there are more than 6 reviews) -->
                {% if review_list|length > 6 %}
                <div class="mt-6 flex justify-center">
                    <button
                        id="load-more-reviews"
                        class="mb-[100px] px-5 py-2 rounded-full bg-slate-800 text-white text-sm font-medium
               border border-slate-600 hover:bg-slate-700 transition">
                        Load more reviews
                    </button>
                </div>
                {% endif %}
            </div>

            {% endif %}
        </section>

        <script>
            //<!-- Side bar -->
            const menuBtn = document.getElementById("menu-btn");
            const mobileMenu = document.getElementById("mobile-menu");

            menuBtn.addEventListener("click", () => {
                mobileMenu.classList.toggle("max-h-0"); // collapsed
                mobileMenu.classList.toggle("max-h-96"); // expanded
                mobileMenu.classList.toggle("opacity-0"); // faded out
                mobileMenu.classList.toggle("opacity-100"); // faded in
            });


            //<!-- review_dropdown -->
            document.querySelectorAll("[data-review-card]").forEach((card) => {
                const text = card.querySelector("[data-review-text]");
                const btn = card.querySelector("[data-review-toggle]");
                let expanded = false;

                btn.addEventListener("click", () => {
                    expanded = !expanded;

                    if (expanded) {
                        text.classList.remove("max-h-24");
                        text.classList.add("max-h-none");   // fully expands, no limit
                        btn.textContent = "Show less";
                    } else {
                        text.classList.add("max-h-24");
                        text.classList.remove("max-h-none"); // collapse again
                        btn.textContent = "Read full review";
                    }
                });
            });

            // "Load more" functionality
            const BATCH_SIZE = 6;
            const cards = Array.from(document.querySelectorAll("[data-review-card]"));
            let visibleCount = Math.min(BATCH_SIZE, cards.length);

            const loadMoreBtn = document.getElementById("load-more-reviews");

            if (loadMoreBtn) {
                loadMoreBtn.addEventListener("click", () => {
                const nextCount = Math.min(visibleCount + BATCH_SIZE, cards.length);

                for (let i = visibleCount; i < nextCount; i++) {
                    cards[i].classList.remove("hidden");
                }

                visibleCount = nextCount;

                // Hide button when all reviews are shown
                if (visibleCount >= cards.length) {
                    loadMoreBtn.classList.add("hidden");
                }
                });
            }

    </script>
    </body>

</html>